"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),e=require("react-dom"),n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var r=function(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}((function(t,e){(function(r){var o,i=0,s=Array.prototype.slice,u=function(t,e){var n=t[e];if(n===r&&o.config.strict)throw new Error("Bottle was unable to resolve a service.  `"+e+"` is undefined.");return n},c=function(t){var e;return this.nested[t]||(e=o.pop(),this.nested[t]=e,this.factory(t,(function(){return e.container}))),this.nested[t]},a=function(t){return t.split(".").reduce(u,this)},f=function(t,e){return e(t)},l=function(t,e){return(t[e]||[]).concat(t.__global__||[])},p=function(t,e){var n,o,i,s,u;return this.id,i=this.container,s=this.decorators,u=this.middlewares,n=t+"Provider",(o=Object.create(null))[n]={configurable:!0,enumerable:!0,get:function(){var t=new e;return delete i[n],i[n]=t,t}},o[t]={configurable:!0,enumerable:!0,get:function(){var e,o=i[n];return o&&(e=l(s,t).reduce(f,o.$get(i)),delete i[n],delete i[t]),e===r?e:function(t,e,n,r){var o={configurable:!0,enumerable:!0};return t.length?o.get=function(){var e=0,r=function(o){if(o)throw o;t[e]&&t[e++](n,r)};return r(),n}:(o.value=n,o.writable=!0),Object.defineProperty(r,e,o),r[e]}(l(u,t),t,e,i)}},Object.defineProperties(i,o),this},d=function(t,e){var n,r;return n=t.split("."),this.providerMap[t]&&1===n.length&&!this.container[t+"Provider"]?console.error(t+" provider already instantiated."):(this.originalProviders[t]=e,this.providerMap[t]=!0,r=n.shift(),n.length?(c.call(this,r).provider(n.join("."),e),this):p.call(this,r,e))},h=function(t,e){return d.call(this,t,(function(){this.$get=e}))},v=function(t,e,n){var r=arguments.length>3?s.call(arguments,3):[],o=this;return h.call(this,t,(function(){var t=e,i=r.map(a,o.container);return n?new(e.bind.apply(e,[null].concat(i))):t.apply(null,i)}))},E=function(t,e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})},y=function(t,e){var n=t[e];return n||E.call(t,e,n={}),n},g=function(t,e){Object.defineProperty(this,t,{configurable:!1,enumerable:!0,value:e,writable:!1})},_=function(t,e){var n,r;return"function"==typeof t&&(e=t,t="__global__"),r=(n=t.split(".")).shift(),n.length?c.call(this,r).decorator(n.join("."),e):(this.decorators[r]||(this.decorators[r]=[]),this.decorators[r].push(e)),this},b=function(t){return!/^\$(?:decorator|register|list)$|Provider$/.test(t)},S=function(t){return Object.keys(t||this.container||{}).filter(b)},m={},x=function(t){var e=t.$value===r?t:t.$value;return this[t.$type||"service"].apply(this,[t.$name,e].concat(t.$inject||[]))},O=function(t){delete this.providerMap[t],delete this.container[t],delete this.container[t+"Provider"]};(o=function t(e){if(!(this instanceof t))return t.pop(e);this.id=i++,this.decorators={},this.middlewares={},this.nested={},this.providerMap={},this.originalProviders={},this.deferred=[],this.container={$decorator:_.bind(this),$register:x.bind(this),$list:S.bind(this)}}).prototype={constant:function(t,e){var n=t.split(".");return t=n.pop(),g.call(n.reduce(y,this.container),t,e),this},decorator:_,defer:function(t){return this.deferred.push(t),this},digest:function(t){return(t||[]).map(a,this.container)},factory:h,instanceFactory:function(t,e){return h.call(this,t,(function(t){return{instance:e.bind(e,t)}}))},list:S,middleware:function(t,e){var n,r;return"function"==typeof t&&(e=t,t="__global__"),r=(n=t.split(".")).shift(),n.length?c.call(this,r).middleware(n.join("."),e):(this.middlewares[r]||(this.middlewares[r]=[]),this.middlewares[r].push(e)),this},provider:d,resetProviders:function(t){var e=this.originalProviders,n=Array.isArray(t);Object.keys(this.originalProviders).forEach((function(r){if(!n||-1!==t.indexOf(r)){var o=r.split(".");o.length>1&&o.forEach(O,c.call(this,o[0])),O.call(this,r),this.provider(r,e[r])}}),this)},register:x,resolve:function(t){return this.deferred.forEach((function(e){e(t)})),this},service:function(t,e){return v.apply(this,[t,e,!0].concat(s.call(arguments,2)))},serviceFactory:function(t,e){return v.apply(this,[t,e,!1].concat(s.call(arguments,2)))},value:function(t,e){var n;return n=t.split("."),t=n.pop(),E.call(n.reduce(y,this.container),t,e),this}},o.pop=function(t){var e;return"string"==typeof t?((e=m[t])||(m[t]=e=new o,e.constant("BOTTLE_NAME",t)),e):new o},o.clear=function(t){"string"==typeof t?delete m[t]:m={}},o.list=S,o.config={strict:!1};var T,I,C,R,w,A={function:!0,object:!0};T=A[typeof window]&&window||this,I=A.object&&e&&!e.nodeType&&e,C=A.object&&t&&!t.nodeType&&t,R=C&&C.exports===I&&I,!(w=A[typeof n]&&n)||w.global!==w&&w.window!==w||(T=w),"function"==typeof r&&"object"==typeof r.amd&&r.amd?(T.Bottle=o,r((function(){return o}))):I&&C?R?(C.exports=o).Bottle=o:I.Bottle=o:T.Bottle=o}).call(n)})),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},i=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.revertArray=function(t){return t.map(this.revert)}}(function(){function t(){}return t.prototype.convertArray=function(t){return t.map(this.convert)},t}()),function(t,e){void 0===t&&(t=16),void 0===e&&(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");for(var n="";n.length<t;)n+=e.charAt(Math.floor(Math.random()*e.length));return n}),s=function(t){var e=0,n=t+":"+i(4)+"-"+i(4)+"-"+i(4)+"-"+i(4);return function(){return n+":"+ ++e}};function u(t){return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];"object"==typeof n&&null!==n&&u(n)})),Object.freeze(t)}!function(t){t.GETTER="GETTER",t.SETTER="SETTER",t.FUNCTION="FUNCTION"}(exports.ScopeMacroType||(exports.ScopeMacroType={})),function(t){t.REGISTER_MACRO="REGISTER_MACRO",t.REGISTER_ACTION="REGISTER_ACTION",t.LOCK="LOCK"}(exports.ScopeChangeEventType||(exports.ScopeChangeEventType={})),function(t){t.CREATE_SCOPE="CREATE_SCOPE",t.LOCK="LOCK"}(exports.StoreChangeEventType||(exports.StoreChangeEventType={}));var c=new Map,a={onCreateStore:function(){return null},onChangeStore:function(){return null},onCreateScope:function(){return null},onChangeScope:function(){return null},onAction:function(){return null},onActionError:function(){return null},onActionListenerError:function(){return null}},f="_reset",l="_restore",p=function(){function t(t,e){var n=this;this._context=null,this._contextEvent=null,this._isActionInProgress=!1,this._actions=new Map,this._listeners=new Map,this._listenerIdGenerator=s("ScopeListener");var r=e.name,o=e.initState,i=e.middleware,u=e.isImmutabilityEnabled,c=e.isSubscribedMacroAutoCreateEnabled,a=e.isFrozen;this.store=t,this.name=r,this.isImmutabilityEnabled=u,this.isSubscribedMacroAutoCreateEnabled=c,this._state=o,this._initState=o,this._middleware=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,u=i.length;s<u;s++,o++)r[o]=i[s];return r}(i).reverse(),this.registerAction("_reset",(function(){return n._initState})),this.registerAction("_restore",(function(t,e){return n._initState=e,e})),this._isFrozen=a}return Object.defineProperty(t.prototype,"isLocked",{get:function(){return this._isFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActionDispatchAvailable",{get:function(){return!this._isActionInProgress},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportActions",{get:function(){return Array.from(this._actions.keys())},enumerable:!1,configurable:!0}),t.prototype.registerAction=function(t,e,n){var r=this;if(this._isFrozen)throw new Error("This scope is locked you can't add new action.");if(this._actions.has(t)||this.isSubscribedMacroAutoCreateEnabled&&t in this)throw new Error("Action name "+t+" is duplicate or reserved in scope "+this.name+".");this._actions.set(t,e);var o=function(e,o){var i=r.dispatch(t,e,o);return n?n(i,e):i};if(this.isSubscribedMacroAutoCreateEnabled){var i="on"+(t.charAt(0).toUpperCase()+t.slice(1));this.registerMacro(i,(function(e,n){return r.subscribe(n,[t])}))}return this[t]=o,a.onChangeScope(this,{type:exports.ScopeChangeEventType.REGISTER_ACTION,actionName:t}),o},t.prototype.registerMacro=function(t,e,n){var r=this;if(void 0===n&&(n=exports.ScopeMacroType.FUNCTION),!e)throw new Error("Macro cannot be null or undefined.");if(this._isFrozen)throw new Error("This scope is locked you can't add new macro.");if(t in this&&("function"==typeof r[t]||n===exports.ScopeMacroType.FUNCTION||n===exports.ScopeMacroType.GETTER&&Object.getOwnPropertyDescriptor(this,t).get||n===exports.ScopeMacroType.SETTER&&Object.getOwnPropertyDescriptor(this,t).set))throw new Error("Macro name "+t+" is reserved in scope "+this.name+".");var o=function(t){return e(r._state,t)};switch(n){case exports.ScopeMacroType.FUNCTION:this[t]=o;break;case exports.ScopeMacroType.GETTER:Object.defineProperty(this,t,{get:o,configurable:!0,enumerable:!0});break;case exports.ScopeMacroType.SETTER:Object.defineProperty(this,t,{set:o,configurable:!0,enumerable:!0})}a.onChangeScope(this,{type:exports.ScopeChangeEventType.REGISTER_MACRO,macroName:t,macroType:n})},t.prototype.dispatch=function(t,e,n){var r=this;void 0===n&&(n=!0);var o=this._actions.get(t);if(!o)throw new Error("This action not exists "+t);if(this._isActionInProgress)throw new Error("Now action dispatch not available. Other action spreads.");this.isImmutabilityEnabled&&e&&"object"==typeof e&&u(e),this._middleware.forEach((function(t){return o=t.appendActionMiddleware(o)}));var i=!this._isActionInProgress;i&&(this._isActionInProgress=!0);var s,c=i?this._state:this._context,f=function(n){return{reason:n,oldState:c,scopeName:r.name,actionName:t,props:e}},l=function(n){var o;return{props:e,oldState:c,newState:n,actionName:t,parentEvent:null!==(o=r._contextEvent)&&void 0!==o?o:null,scopeName:r.name,storeName:r.store.name,childrenEvents:[]}};try{return function(t){r.isImmutabilityEnabled&&t&&"object"==typeof e&&u(t),r._context=t,n&&(i?r._contextEvent=l(t):null==r||r._contextEvent.childrenEvents.push(l(t)));var o=function(t){a.onAction(t),r._listeners.forEach((function(e){try{null==e||e(t)}catch(t){a.onActionListenerError(f(t))}}))};return i&&(r._state=t,r._contextEvent&&(r._contextEvent.childrenEvents.forEach(o),o(r._contextEvent)),r._context=null,r._contextEvent=null,r._isActionInProgress=!1),t}(o(c,e))}catch(t){throw s=f(t),i&&a.onActionError(s),s}},t.prototype.subscribe=function(t,e){var n=this;void 0===e&&(e=[]),e.forEach((function(t){if(!n._actions.has(t))throw new Error("Action ("+t+") not present in scope.")}));var r=this._listenerIdGenerator();return this._listeners.set(r,0===e.length?t:function(n){-1!==e.findIndex((function(t){return t===n.actionName}))&&t(n)}),Object.assign((function(){return n.unsubscribe(r)}),{listenerId:r})},t.prototype.unsubscribe=function(t){return this._listeners.delete(t)},t.prototype.lock=function(){this._isFrozen=!0,a.onChangeScope(this,{type:exports.ScopeChangeEventType.LOCK})},t.prototype.reset=function(t){return this.dispatch("_reset",null,t)},t.prototype.restore=function(t,e){return this.dispatch("_restore",t,e)},t}(),d=function(){function t(t){this._scopes=new Map,this._statesToRestore=new Map,this._scopeNameGenerator=s("Scope"),this.name=t.name,this._isFrozen=t.isFrozen}return Object.defineProperty(t.prototype,"isLocked",{get:function(){return this._isFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){var t={};return this._scopes.forEach((function(e){t[e.name]=e.state})),t},enumerable:!1,configurable:!0}),t.prototype.createScope=function(t,e){if(void 0===t&&(t={}),this._isFrozen)throw new Error("This Store is locked you can't add new scope.");var n=t.name,r=void 0===n?this._scopeNameGenerator():n,o=t.initState,i=void 0===o?null:o,s=t.middleware,u=void 0===s?[]:s,c=t.isImmutabilityEnabled,f=void 0!==c&&c,l=t.isSubscribedMacroAutoCreateEnabled,d=void 0!==l&&l,h=t.isFrozen,v=void 0!==h&&h;if(this._scopes.has(r))throw new Error("Scope name must unique");var E=e&&this._statesToRestore.has(r),y=E?this._statesToRestore.get(r):i;E&&this._statesToRestore.delete(r);var g=new p(this,{name:r,initState:y,middleware:u,isImmutabilityEnabled:f,isSubscribedMacroAutoCreateEnabled:d,isFrozen:v});return this._scopes.set(r,g),u.forEach((function(t){return t.postSetup(g)})),a.onCreateScope(g),a.onChangeStore(this,{type:exports.StoreChangeEventType.CREATE_SCOPE,scopeName:r}),g},t.prototype.getScope=function(t){return this._scopes.get(t)},t.prototype.hasScope=function(t){return this._scopes.has(t)},t.prototype.lock=function(){this._isFrozen=!0,this._scopes.forEach((function(t){return t.lock()})),a.onChangeStore(this,{type:exports.StoreChangeEventType.LOCK})},t.prototype.reset=function(t){this._scopes.forEach((function(e){return e.reset(t)}))},t.prototype.restore=function(t,e){var n=this;Object.getOwnPropertyNames(t).forEach((function(r){var o=t[r];n.hasScope(r)?n.getScope(r).restore(o,e):n._statesToRestore.set(r,o)}))},t}();function h(t){return c.has(t)}function v(t){var e=t.name,n=t.isFrozen,r=void 0!==n&&n;if(h(e))throw new Error("Store name must unique");var o=new d({name:e,isFrozen:r});return c.set(e,o),a.onCreateStore(o),o}function E(t){return c.get(t)}function y(){var t={};return c.forEach((function(e){t[e.name]=e.state})),t}function g(t){Object.assign(a,t)}var _=function(){return(_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},b=function(t,e){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},S=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(function(t,e){function n(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.revertArray=function(t){return t.map(this.revert)}}(function(){function t(){}return t.prototype.convertArray=function(t){return t.map(this.convert)},t}()),function(t,e){void 0===t&&(t=16),void 0===e&&(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");for(var n="";n.length<t;)n+=e.charAt(Math.floor(Math.random()*e.length));return n}),m=function(t){var e=0,n=t+":"+S(4)+"-"+S(4)+"-"+S(4)+"-"+S(4);return function(){return n+":"+ ++e}},x=new Map,O=m("EventBus"),T=m("EventBusListener"),I={onCreate:function(){return null},onEvent:function(){return null},onEventListenerError:function(){return null}},C=function(){function t(t){this._events=[],this._queue=[],this._listeners=new Map;var e=t.name,n=t.isFrozen,r=t.isImmutabilityEnabled;this.name=e,this.isImmutabilityEnabled=r,this._isFrozen=n}return Object.defineProperty(t.prototype,"isLocked",{get:function(){return this._isFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportEvents",{get:function(){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,u=i.length;s<u;s++,o++)r[o]=i[s];return r}(this._events)},enumerable:!1,configurable:!0}),t.prototype.registerEvent=function(t){var e=this;if(this._isFrozen)throw new Error("This event bus is locked you can't add new event.");if(this.isEventPresent(t)||t in this)throw new Error("Event with name "+t+" is duplicate or reserved in event bus "+this.name+".");this._events.push(t);var n=function(){return t.charAt(0).toUpperCase()+t.slice(1)},r="on"+n(),o="publish"+n();this[r]=function(n){e.subscribe(n,[t])};var i=function(n){return e.publish(t,n)};return this[o]=i,i},t.prototype.publish=function(t,e){var n=this,r=function(){n.isImmutabilityEnabled&&e&&"object"==typeof e&&function t(e){return Object.getOwnPropertyNames(e).forEach((function(n){var r=e[n];"object"==typeof r&&null!==r&&t(r)})),Object.freeze(e)}(e);var r={eventBusName:n.name,eventName:t,data:e};I.onEvent(r),n._listeners.forEach((function(t){try{t&&t(r)}catch(t){I.onEventListenerError(_(_({},r),{reason:t}))}})),n._queue.shift(),n._queue.length>0&&(0,n._queue[0])()},o=0===this._queue.length;this._queue.push(r),o&&r()},t.prototype.subscribe=function(t,e){var n=this;void 0===e&&(e=[]),e.forEach((function(t){if(!n.isEventPresent(t))throw new Error("Event ("+t+") not present in scope.")}));var r=T();return this._listeners.set(r,0===e.length?t:function(n){-1!==e.findIndex((function(t){return t===n.eventName}))&&t(n)}),Object.assign((function(){return n.unsubscribe(r)}),{listenerId:r})},t.prototype.unsubscribe=function(t){return this._listeners.delete(t)},t.prototype.lock=function(){this._isFrozen=!0},t.prototype.isEventPresent=function(t){return-1!==this._events.findIndex((function(e){return e===t}))},t}();function R(t){return x.has(t)}function w(t){void 0===t&&(t={});var e=t.name,n=void 0===e?O():e,r=t.isFrozen,o=void 0!==r&&r,i=t.isImmutabilityEnabled,s=void 0!==i&&i;if(R(n))throw new Error("Event bus name must unique");var u=new C({name:n,isFrozen:o,isImmutabilityEnabled:s});return x.set(n,u),I.onCreate(u),u}function A(t){return x.get(t)}function L(t){Object.assign(I,t)}var N={STORE:"$store",EVENT_BUS:"$eventBus",MODULE_STORE:"$moduleStore",RESOURCE_STORE:"$resourceStore",INTERNATIONALIZATION_STORE:"$internationalizationStore",CONFIG_STORE:"$configStore",MODULE_SERVICE:"$moduleService",RESOURCE_SERVICE:"$resourceService",INTERNATIONALIZATION_SERVICE:"$internationalizationService",CONFIG_SERVICE:"$configService",JSX_SERVICE:"$jsxService",REPOSITORY_SERVICE:"$repositoryService"};function P(t,e){if(void 0===e&&(e=new r(t)),h(t))throw new Error("Ligui store exist with name "+t);if(R(t))throw new Error("Ligui event bus exist with name "+t);return Object.freeze({store:v({name:t}),eventBus:w({name:t}),bottle:e})}var M=function(t,e){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},U=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(function(t,e){function n(){this.constructor=t}M(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.revertArray=function(t){return t.map(this.revert)}}(function(){function t(){}return t.prototype.convertArray=function(t){return t.map(this.convert)},t}()),function(t,e){void 0===t&&(t=16),void 0===e&&(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");for(var n="";n.length<t;)n+=e.charAt(Math.floor(Math.random()*e.length));return n}),j=function(t){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,u=i.length;s<u;s++,o++)r[o]=i[s];return r}(t)},k=function(t,e,n){void 0===n&&(n=function(t,e){return t===e});var r=t.findIndex((function(t,r,o){return n(t,e,r,o)}));-1!==r?t[r]=e:t.push(e)},F=function(t,e){var n=t.findIndex(e);-1!==n&&t.splice(n,1)};(exports.ModuleStoreActions||(exports.ModuleStoreActions={})).UpdateModules="UPDATE_MODULES";var z=function(t,e){var n=t.createScope({name:N.MODULE_STORE,initState:{modules:e.modules||[]},isSubscribedMacroAutoCreateEnabled:!0},!0);return n.setModules=n.registerAction(exports.ModuleStoreActions.UpdateModules,(function(t,e){var n=j(t.modules);return e.forEach((function(t){return k(n,t,(function(e){return B(t.id,e.id)}))})),{modules:n}})),n.findModuleById=function(t){return n.state.modules.find((function(e){return B(e.id,t)}))},n.isModuleExist=function(t){return!!n.findModuleById(t)},n};function B(t,e){return t.key===e.key&&t.context===e.context}(exports.ResourceStoreActions||(exports.ResourceStoreActions={})).UpdateResources="UPDATE_RESOURCES";var D=function(t,e){var n=t.createScope({name:N.RESOURCE_STORE,initState:{resources:e.resources||[]},isSubscribedMacroAutoCreateEnabled:!0},!0);return n.registerAction(exports.ResourceStoreActions.UpdateResources,(function(t,e){var n=j(t.resources);return e.forEach((function(t){return k(n,t,(function(e){return V(t.id,e.id)}))})),{resources:n}})),n.findResourceById=function(t){return n.state.resources.find((function(e){return V(e.id,t)}))},n.isResourceExist=function(t){return!!n.findResourceById(t)},n};function V(t,e){return t.key===e.key&&t.context===e.context}var G,$=function(){return($=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};(G=exports.InternationalizationStoreActions||(exports.InternationalizationStoreActions={})).ChangeLocale="CHANGE_LOCALE",G.UpdateTranslateUnits="UPDATE_TRANSLATE_UNITS";var K=function(t,e){var n=t.createScope({name:N.INTERNATIONALIZATION_STORE,initState:{currentLocale:e.currentLocale||null,defaultLocale:e.defaultLocale||null,locales:e.locales||[],translateUnits:e.translateUnits||[]},isSubscribedMacroAutoCreateEnabled:!0},!0);return n.setLocale=n.registerAction(exports.InternationalizationStoreActions.ChangeLocale,(function(t,e){if(!n.isLocaleExist(e))throw new Error("Locale not present in locales.");return $($({},t),{currentLocale:e})})),n.setTranslateUnits=n.registerAction(exports.InternationalizationStoreActions.UpdateTranslateUnits,(function(t,e){var n=j(t.translateUnits);return e.forEach((function(t){return k(n,t,(function(e){return q(t.id,e.id)}))})),$($({},t),{translateUnits:n})})),n.setTranslationForLocale=function(t,e,r){var o=Object.getOwnPropertyNames(e).map((function(n){return{id:{key:n,locale:t,context:r},data:e[n]}}));n.setTranslateUnits(o)},n.getCurrentLocale=function(){return n.state.currentLocale},n.getDefaultLocale=function(){return n.state.defaultLocale},n.getLocales=function(){return n.state.locales},n.findTranslateUnitById=function(t){return n.state.translateUnits.find((function(e){return q(e.id,t)}))},n.isLocaleExist=function(t){return!!n.state.locales.find((function(e){return e===t}))},n.isTranslateUnitExist=function(t){return!!n.findTranslateUnitById(t)},n};function q(t,e){return t.key===e.key&&t.locale===e.locale&&t.context===e.context}(exports.ConfigStoreActions||(exports.ConfigStoreActions={})).UpdateConfigs="CONFIGS_UPDATE";var Z=function(t,e){var n=t.createScope({name:N.CONFIG_STORE,initState:{configs:e.configs||[]},isSubscribedMacroAutoCreateEnabled:!0},!0);return n.setConfigs=n.registerAction(exports.ConfigStoreActions.UpdateConfigs,(function(t,e){var n=j(t.configs);return e.forEach((function(t){return k(n,t,(function(e){return H(t.id,e.id)}))})),{configs:n}})),n.findConfigById=function(t){return n.state.configs.find((function(e){return H(e.id,t)}))},n.isConfigExist=function(t){return!!n.findConfigById(t)},n};function H(t,e){return t.key===e.key&&t.context===e.context}var J=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[];return t.filter((function(t){return!!t})).forEach((function(t){if("string"==typeof t)n.push(t);else{var e=t[0];t[1]&&n.push(e)}})),n.join(" ")},X=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[];return t.filter((function(t){return!!t})).forEach((function(t){if(Array.isArray(t)){var e=t[0];t[1]&&n.push(e)}else n.push(t)})),n.reduce((function(t,e){return Object.assign(t,e)}))},Y=function(t,e){void 0===e&&(e=!0),t.preventDefault(),t.stopPropagation(),t.nativeEvent&&e&&(t.nativeEvent.preventDefault(),t.nativeEvent.stopPropagation())},Q=function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)},W=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){t.filter((function(t){return!!t})).map((function(t){"function"==typeof t?t(e):t.current=e}))}},tt=function(){function n(){this._factories={},this.classes=J,this.styles=X,this.eventTrap=Y,this.isModifiedEvent=Q,this.mergeRefs=W}return n.prototype.hydrate=function(t,n){e.hydrate(n,t)},n.prototype.hydrateComponent=function(t,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];e.hydrate(this.node(n,r,o),t)},n.prototype.node=function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e in this._factories?this._factories[e](n,r):t.createElement(e,n,r)},n.prototype.registerFactory=function(t,e){if(t in this._factories)throw new Error("Factory with same name is register.");this._factories[t]=e},n.prototype.render=function(t,n){e.render(n,t)},n.prototype.renderComponent=function(t,n,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];e.render(this.node(n,r,o),t)},n}(),et=function(){function t(t,e){void 0===e&&(e=[]),this._store=t,this._resourceLoaders=e,this._resourcePromises=[]}return t.prototype.setResourceLoader=function(t){F(this._resourcePromises,(function(e){return e.id.context===t.context})),k(this._resourceLoaders,t,(function(e){return e.context===t.context}))},t.prototype.getResourceLoader=function(t){return this._resourceLoaders.find((function(e){return e.context===t}))},t.prototype.loadResource=function(t){var e=this,n=this._resourcePromises,r=this._resourceLoaders,o=this._store;if(o.isResourceExist(t))return o.findResourceById(t);var i=n.find((function(e){return V(t,e.id)}));if(i)return i.promise;var s=r.find((function(e){return e.context===t.context}));if(!s)throw new Error("Resource loader for key "+JSON.stringify(t)+" not found");var u=s.loader(t.key),c=function(e){var n={id:t,data:e};return o.setResources([n]),n};if(u instanceof Promise){var a={id:t,promise:u.then(c)};return a.promise.then((function(){return F(e._resourcePromises,(function(e){return V(e.id,t)}))})),n.push(a),a.promise}return c(u)},t}(),nt=function(){function t(t,e){void 0===e&&(e=[]),this._store=t,this._translateUnitLoaders=e,this._translateUnitPromises=[]}return t.prototype.setTranslateUnitLoader=function(t){F(this._translateUnitPromises,(function(e){return e.id.context===t.context})),k(this._translateUnitLoaders,t,(function(e){return e.context===t.context}))},t.prototype.getTranslateUnitLoader=function(t){return this._translateUnitLoaders.find((function(e){return e.context===t}))},t.prototype.loadTranslateUnit=function(t){var e,n=this,r=this._translateUnitPromises,o=this._translateUnitLoaders,i=this._store;if(i.isTranslateUnitExist(t))return i.findTranslateUnitById(t);var s=r.find((function(e){return q(t,e.id)}));if(s)return s.promise;var u=o.find((function(e){return e.context===t.context}));if(!u)throw new Error("TranslateUnit loader for key "+JSON.stringify(t)+" not found");var c=null!==(e=u.loader(t.key,t.locale))&&void 0!==e?e:u.loader(t.key,i.getDefaultLocale()),a=function(e){var n={id:t,data:e};return i.setTranslateUnits([n]),n};if(c instanceof Promise){var f={id:t,promise:c.then(a)};return f.promise.then((function(){return F(n._translateUnitPromises,(function(e){return q(e.id,t)}))})),r.push(f),f.promise}return a(c)},t.prototype.getTranslator=function(t,e){var n=this,r=function(o,i){var s,u={};if("string"==typeof i?u={defaultValue:i}:"object"==typeof i&&(u=i),"object"==typeof o)return o[r.locale]||u.defaultValue;if("string"!=typeof o)throw new Error("Invalid translator arg path format "+o);var c=(""+r.prefix+o).split(/[.\[\]]/).filter((function(t){return""!==t})),a=c[0],f=c.slice(1),l={key:a,context:t,locale:e||n._store.getCurrentLocale()},p={key:a,context:t,locale:n._store.getDefaultLocale()},d=null!==(s=n._store.findTranslateUnitById(l))&&void 0!==s?s:n._store.findTranslateUnitById(p);if(void 0===d)return u.defaultValue;for(var h=d.data,v=0;v<f.length&&h;v++)h=h[f[v]];return void 0===h?u.defaultValue:("string"!=typeof h||Object.keys(u).forEach((function(t){h=h.replace("${"+t,JSON.stringify(u[t]))})),h)};return r.locale=e||this._store.getCurrentLocale(),r.prefix="",r},t}(),rt=function(){function t(t,e){void 0===e&&(e=[]),this._store=t,this._configLoaders=e,this._configPromises=[]}return t.prototype.setConfigLoader=function(t){F(this._configPromises,(function(e){return e.id.context===t.context})),k(this._configLoaders,t,(function(e){return e.context===t.context}))},t.prototype.getConfigLoader=function(t){return this._configLoaders.find((function(e){return e.context===t}))},t.prototype.loadConfig=function(t){var e=this,n=this._configPromises,r=this._configLoaders,o=this._store;if(o.isConfigExist(t))return o.findConfigById(t);var i=n.find((function(e){return H(t,e.id)}));if(i)return i.promise;var s=r.find((function(e){return e.context===t.context}));if(!s)throw new Error("Config loader for key "+JSON.stringify(t)+" not found");var u=s.loader(t.key),c=function(e){var n={id:t,data:e};return o.setConfigs([n]),n};if(u instanceof Promise){var a={id:t,promise:u.then(c)};return a.promise.then((function(){return F(e._configPromises,(function(e){return H(e.id,t)}))})),n.push(a),a.promise}return c(u)},t}(),ot=function(){function t(t,e){void 0===e&&(e=[]),this._store=t,this._moduleLoaders=e,this._modulePromises=[]}return t.prototype.setModuleLoader=function(t){F(this._modulePromises,(function(e){return e.id.context===t.context})),k(this._moduleLoaders,t,(function(e){return e.context===t.context}))},t.prototype.getModuleLoader=function(t){return this._moduleLoaders.find((function(e){return e.context===t}))},t.prototype.loadModule=function(t){var e=this,n=this._modulePromises,r=this._moduleLoaders,o=this._store;if(o.isModuleExist(t))return o.findModuleById(t);var i=n.find((function(e){return B(t,e.id)}));if(i)return i.promise;var s=r.find((function(e){return e.context===t.context}));if(!s)throw new Error("Module loader for key "+JSON.stringify(t)+" not found");var u=s.loader(t.key),c=function(e){var n={id:t,body:e};return o.setModules([n]),n};if(u instanceof Promise){var a={id:t,promise:u.then(c)};return a.promise.then((function(){return F(e._modulePromises,(function(e){return B(e.id,t)}))})),n.push(a),a.promise}return c(u)},t}(),it=function(){function t(){this._states=new Map,this._repositories=new Map}return t.prototype.get=function(t){return this._states.get(t)},t.prototype.set=function(t,e){this._states.set(t,e)},t.prototype.delete=function(t){this._states.delete(t)},t.prototype.collect=function(){var t={};return this._repositories.forEach((function(e,n){var r,o=null===(r=e.collect)||void 0===r?void 0:r.call(e);o&&(t[n]=o)})),t},t.prototype.reset=function(){this._repositories.forEach((function(t){var e;return null===(e=t.reset)||void 0===e?void 0:e.call(t)}))},t.prototype.restore=function(t){var e=this;Object.getOwnPropertyNames(t).forEach((function(n){var r,o,i=t[n];e._repositories.has(n)?null===(o=(r=e._repositories.get(n)).restore)||void 0===o||o.call(r,i):e._states.set(n,i)}))},t.prototype.registerRepository=function(t,e,n){var r;void 0===n&&(n={});var o=n.activeCollect,i=void 0===o||o,s=n.activeRestore,u=void 0===s||s,c=n.activeReset,a=void 0===c||c,f={};i&&(f.collect=function(){var t;return null===(t=e.collect)||void 0===t?void 0:t.call(e)}),u&&(f.restore=function(t){var n;return null===(n=e.restore)||void 0===n?void 0:n.call(e,t)}),a&&(f.reset=function(){var t;return null===(t=e.reset)||void 0===t?void 0:t.call(e)}),this._repositories.set(t,f),this._states.has(t)&&(null===(r=f.restore)||void 0===r||r.call(f,this._states.get(t)))},t}(),st=function(e,n,r){var o=t.useState(e),i=o[0],s=o[1];return t.useEffect((function(){!i&&n&&Promise.resolve(n()).then((function(t){return s((function(){return t}))}))}),[]),t.useEffect((function(){if(r){var t=r((function(){return s((function(){return e()}))}));if("function"==typeof t)return t}}),[]),i},ut=function(t){var e=0,n=t+":"+U(4)+"-"+U(4)+"-"+U(4)+"-"+U(4);return function(){return n+":"+ ++e}}("IdHook"),ct=function(){return t.useMemo((function(){return ut()}),[])},at=function(e){var n=t.useState(e),r=n[0],o=n[1];return{set current(t){o((function(){return t}))},get current(){return r}}},ft=function(e){return function(n,r,o,i){var s="string"==typeof n?e.getScope(n):n,u=null!=o?o:function(t){return t},c=t.useRef(null),a=t.useState((function(){return u(s.state)})),f=a[0],l=a[1];return c.current=f,t.useEffect((function(){return s.subscribe((function(t){var e=u(t.newState);i&&!i(c.current,e)||(c.current=e,l((function(){return e})))}),r)}),[]),f}},lt=function(e){return function(n,r){void 0===n&&(n=null),t.useEffect((function(){return e.subscribe(r,n)}),[])}};exports.ModuleKeyContext=null,t&&(exports.ModuleKeyContext=t.createContext(void 0));var pt=function(e){return function(n,r){var o=e[N.MODULE_STORE],i=e[N.MODULE_SERVICE],s={key:n,context:r||t.useContext(exports.ModuleKeyContext)},u=t.useState((function(){if(o.isModuleExist(s))return o.findModuleById(s).body;var t=i.loadModule(s);return t instanceof Promise?null:t.body})),c=u[0],a=u[1];return t.useEffect((function(){c||Promise.resolve(i.loadModule(s)).then((function(t){return a((function(){return t.body}))}))}),[c]),c}};exports.ResourceKeyContext=null,t&&(exports.ResourceKeyContext=t.createContext(void 0));var dt=function(e){return function(n,r){var o=e[N.RESOURCE_STORE],i=e[N.RESOURCE_SERVICE],s={key:n,context:r||t.useContext(exports.ResourceKeyContext)},u=t.useState((function(){if(o.isResourceExist(s))return o.findResourceById(s).data;var t=i.loadResource(s);return t instanceof Promise?null:t.data})),c=u[0],a=u[1];return t.useEffect((function(){c||Promise.resolve(i.loadResource(s)).then((function(t){return a((function(){return t.data}))}))}),[c]),c}},ht=function(e){return function(n){return t.useMemo((function(){return e[n]}),[n])}};exports.InternationalizationKeyContext=null,t&&(exports.InternationalizationKeyContext=t.createContext(void 0));var vt=function(e){return function(){var n=e[N.INTERNATIONALIZATION_STORE],r=function(){return{setLocale:function(t){return n.setLocale(t)},currentLocale:n.getCurrentLocale(),defaultLocale:n.getDefaultLocale(),locales:n.getLocales()}},o=t.useState(r),i=o[0],s=o[1];return t.useEffect((function(){return n.subscribe((function(){s(r())}),[exports.InternationalizationStoreActions.ChangeLocale,f,l])}),[]),i}},Et=function(e){return function(n,r){var o=e[N.INTERNATIONALIZATION_STORE],i=e[N.INTERNATIONALIZATION_SERVICE],s=r||t.useContext(exports.InternationalizationKeyContext),u=function(){var t=i.getTranslator(s);return t.prefix=n+".",t},c=function(){return{key:n,context:s,locale:o.getCurrentLocale()}},a=function(){var t=c();return o.isTranslateUnitExist(t)?u():i.loadTranslateUnit(t)instanceof Promise?null:u()},p=t.useState(a),d=p[0],h=p[1];return t.useEffect((function(){return o.subscribe((function(t){if(t.actionName===exports.InternationalizationStoreActions.UpdateTranslateUnits){var e=c();if(!(t.props.findIndex((function(t){return q(t.id,e)}))>=0))return}var n=a();n&&h((function(){return n}))}),[exports.InternationalizationStoreActions.ChangeLocale,exports.InternationalizationStoreActions.UpdateTranslateUnits,f,l])}),[]),[d||function(t,e){return e},!!d]}};exports.ConfigKeyContext=null,t&&(exports.ConfigKeyContext=t.createContext(void 0));var yt=function(e){return function(n,r){var o=e[N.CONFIG_STORE],i=e[N.CONFIG_SERVICE],s={key:n,context:r||t.useContext(exports.ConfigKeyContext)},u=t.useState((function(){if(o.isConfigExist(s))return o.findConfigById(s).data;var t=i.loadConfig(s);return t instanceof Promise?null:t.data})),c=u[0],a=u[1];return t.useEffect((function(){c||Promise.resolve(i.loadConfig(s)).then((function(t){return a((function(){return t.data}))}))}),[c]),c}};exports.ConfigServiceImpl=rt,exports.Container=r,exports.InternationalizationServiceImpl=nt,exports.JSXServiceImpl=tt,exports.LIGUI_TYPES=N,exports.ModuleServiceImpl=ot,exports.RESET_SCOPE_ACTION=f,exports.RESTORE_SCOPE_ACTION=l,exports.RepositoryServiceImpl=it,exports.ResourceServiceImpl=et,exports.classes=J,exports.createConfigHook=yt,exports.createConfigStore=Z,exports.createContext=P,exports.createDependencyHook=ht,exports.createEventBus=w,exports.createEventHook=lt,exports.createI18nHook=vt,exports.createInternationalizationStore=K,exports.createModuleHook=pt,exports.createModuleStore=z,exports.createNewLiguiInstance=function(t){if(global[t.name])throw new Error("Ligui instance present in global object with name: "+t.name);var e=P(t.name,t.bottle);e.bottle.constant(N.STORE,e.store),e.bottle.constant(N.EVENT_BUS,e.eventBus),e.bottle.factory(N.CONFIG_STORE,(function(){return Z(e.store,{configs:t.configs})})),e.bottle.factory(N.INTERNATIONALIZATION_STORE,(function(){return K(e.store,{locales:t.locales,currentLocale:t.currentLocale,defaultLocale:t.defaultLocale,translateUnits:t.translateUnits})})),e.bottle.factory(N.MODULE_STORE,(function(){return z(e.store,{modules:t.modules})})),e.bottle.factory(N.RESOURCE_STORE,(function(){return D(e.store,{resources:t.resources})})),e.bottle.factory(N.CONFIG_SERVICE,(function(e){return new rt(e[N.CONFIG_STORE],t.configLoaders)})),e.bottle.factory(N.INTERNATIONALIZATION_SERVICE,(function(e){return new nt(e[N.INTERNATIONALIZATION_STORE],t.internationalizationLoaders)})),e.bottle.factory(N.JSX_SERVICE,(function(){return new tt})),e.bottle.factory(N.MODULE_SERVICE,(function(e){return new ot(e[N.MODULE_STORE],t.moduleLoaders)})),e.bottle.factory(N.REPOSITORY_SERVICE,(function(){return new it})),e.bottle.factory(N.RESOURCE_SERVICE,(function(e){return new et(e[N.RESOURCE_STORE],t.resourceLoaders)}));var n={get jsx(){return e.bottle.container[N.JSX_SERVICE]},get resource(){return{store:e.bottle.container[N.RESOURCE_STORE],service:e.bottle.container[N.RESOURCE_SERVICE]}},get internationalization(){return{store:e.bottle.container[N.INTERNATIONALIZATION_STORE],service:e.bottle.container[N.INTERNATIONALIZATION_SERVICE]}},get config(){return{store:e.bottle.container[N.CONFIG_STORE],service:e.bottle.container[N.CONFIG_SERVICE]}},get module(){return{store:e.bottle.container[N.MODULE_STORE],service:e.bottle.container[N.MODULE_SERVICE]}},get repository(){return e.bottle.container[N.REPOSITORY_SERVICE]},get context(){return e},get store(){return e.store},get eventBus(){return e.eventBus},get bottle(){return e.bottle},get container(){return e.bottle.container},createStore:v,isStoreExist:h,getState:y,getStore:E,setStoreDevTool:g,createEventBus:w,isEventBusExist:R,getEventBus:A,setEventBusDevTool:L,useId:ct,useRef:at,useData:st,useState:ft(e.store),useEvent:lt(e.eventBus),useModule:pt(e.bottle.container),useResource:dt(e.bottle.container),useI18n:vt(e.bottle.container),useTranslator:Et(e.bottle.container),useConfig:yt(e.bottle.container),useDependency:ht(e.bottle.container)};return global[t.name]=n,n},exports.createResourceHook=dt,exports.createResourceStore=D,exports.createStateHook=ft,exports.createStore=v,exports.createTranslatorHook=Et,exports.eventTrap=Y,exports.getEventBus=A,exports.getState=y,exports.getStore=E,exports.isConfigsIdsEqual=H,exports.isEventBusExist=R,exports.isModifiedEvent=Q,exports.isModulesIdsEqual=B,exports.isResourcesIdsEqual=V,exports.isStoreExist=h,exports.isTranslateUnitsIdsEqual=q,exports.mergeRefs=W,exports.setEventBusDevTool=L,exports.setStoreDevTool=g,exports.styles=X,exports.useData=st,exports.useId=ct,exports.useRef=at;
