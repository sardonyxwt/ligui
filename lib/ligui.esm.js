import*as t from"react";import{createElement as e,useState as n,useEffect as r,useMemo as o,useRef as i,createContext as s,useContext as u}from"react";import{hydrate as c,render as a}from"react-dom";var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var l,d,h,p=function(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}((function(t,e){(function(n){var r,o=0,i=Array.prototype.slice,s=function(t,e){var o=t[e];if(o===n&&r.config.strict)throw new Error("Bottle was unable to resolve a service.  `"+e+"` is undefined.");return o},u=function(t){var e;return this.nested[t]||(e=r.pop(),this.nested[t]=e,this.factory(t,(function(){return e.container}))),this.nested[t]},c=function(t){return t.split(".").reduce(s,this)},a=function(t,e){return e(t)},l=function(t,e){return(t[e]||[]).concat(t.__global__||[])},d=function(t,e){var r,o,i,s,u;return this.id,i=this.container,s=this.decorators,u=this.middlewares,r=t+"Provider",(o=Object.create(null))[r]={configurable:!0,enumerable:!0,get:function(){var t=new e;return delete i[r],i[r]=t,t}},o[t]={configurable:!0,enumerable:!0,get:function(){var e,o=i[r];return o&&(e=l(s,t).reduce(a,o.$get(i)),delete i[r],delete i[t]),e===n?e:function(t,e,n,r){var o={configurable:!0,enumerable:!0};return t.length?o.get=function(){var e=0,r=function(o){if(o)throw o;t[e]&&t[e++](n,r)};return r(),n}:(o.value=n,o.writable=!0),Object.defineProperty(r,e,o),r[e]}(l(u,t),t,e,i)}},Object.defineProperties(i,o),this},h=function(t,e){var n,r;return n=t.split("."),this.providerMap[t]&&1===n.length&&!this.container[t+"Provider"]?console.error(t+" provider already instantiated."):(this.originalProviders[t]=e,this.providerMap[t]=!0,r=n.shift(),n.length?(u.call(this,r).provider(n.join("."),e),this):d.call(this,r,e))},p=function(t,e){return h.call(this,t,(function(){this.$get=e}))},v=function(t,e,n){var r=arguments.length>3?i.call(arguments,3):[],o=this;return p.call(this,t,(function(){var t=e,i=r.map(c,o.container);return n?new(e.bind.apply(e,[null].concat(i))):t.apply(null,i)}))},E=function(t,e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})},y=function(t,e){var n=t[e];return n||E.call(t,e,n={}),n},_=function(t,e){Object.defineProperty(this,t,{configurable:!1,enumerable:!0,value:e,writable:!1})},g=function(t,e){var n,r;return"function"==typeof t&&(e=t,t="__global__"),r=(n=t.split(".")).shift(),n.length?u.call(this,r).decorator(n.join("."),e):(this.decorators[r]||(this.decorators[r]=[]),this.decorators[r].push(e)),this},b=function(t){return!/^\$(?:decorator|register|list)$|Provider$/.test(t)},m=function(t){return Object.keys(t||this.container||{}).filter(b)},O={},S=function(t){var e=t.$value===n?t:t.$value;return this[t.$type||"service"].apply(this,[t.$name,e].concat(t.$inject||[]))},T=function(t){delete this.providerMap[t],delete this.container[t],delete this.container[t+"Provider"]};(r=function t(e){if(!(this instanceof t))return t.pop(e);this.id=o++,this.decorators={},this.middlewares={},this.nested={},this.providerMap={},this.originalProviders={},this.deferred=[],this.container={$decorator:g.bind(this),$register:S.bind(this),$list:m.bind(this)}}).prototype={constant:function(t,e){var n=t.split(".");return t=n.pop(),_.call(n.reduce(y,this.container),t,e),this},decorator:g,defer:function(t){return this.deferred.push(t),this},digest:function(t){return(t||[]).map(c,this.container)},factory:p,instanceFactory:function(t,e){return p.call(this,t,(function(t){return{instance:e.bind(e,t)}}))},list:m,middleware:function(t,e){var n,r;return"function"==typeof t&&(e=t,t="__global__"),r=(n=t.split(".")).shift(),n.length?u.call(this,r).middleware(n.join("."),e):(this.middlewares[r]||(this.middlewares[r]=[]),this.middlewares[r].push(e)),this},provider:h,resetProviders:function(t){var e=this.originalProviders,n=Array.isArray(t);Object.keys(this.originalProviders).forEach((function(r){if(!n||-1!==t.indexOf(r)){var o=r.split(".");o.length>1&&o.forEach(T,u.call(this,o[0])),T.call(this,r),this.provider(r,e[r])}}),this)},register:S,resolve:function(t){return this.deferred.forEach((function(e){e(t)})),this},service:function(t,e){return v.apply(this,[t,e,!0].concat(i.call(arguments,2)))},serviceFactory:function(t,e){return v.apply(this,[t,e,!1].concat(i.call(arguments,2)))},value:function(t,e){var n;return n=t.split("."),t=n.pop(),E.call(n.reduce(y,this.container),t,e),this}},r.pop=function(t){var e;return"string"==typeof t?((e=O[t])||(O[t]=e=new r,e.constant("BOTTLE_NAME",t)),e):new r},r.clear=function(t){"string"==typeof t?delete O[t]:O={}},r.list=m,r.config={strict:!1};var R,I,w,C,A,L={function:!0,object:!0};R=L[typeof window]&&window||this,I=L.object&&e&&!e.nodeType&&e,w=L.object&&t&&!t.nodeType&&t,C=w&&w.exports===I&&I,!(A=L[typeof f]&&f)||A.global!==A&&A.window!==A||(R=A),"function"==typeof n&&"object"==typeof n.amd&&n.amd?(R.Bottle=r,n((function(){return r}))):I&&w?C?(w.exports=r).Bottle=r:I.Bottle=r:R.Bottle=r}).call(f)})),v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},E=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(function(t,e){function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.revertArray=function(t){return t.map(this.revert)}}(function(){function t(){}return t.prototype.convertArray=function(t){return t.map(this.convert)},t}()),function(t,e){void 0===t&&(t=16),void 0===e&&(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");for(var n="";n.length<t;)n+=e.charAt(Math.floor(Math.random()*e.length));return n}),y=function(t){var e=0,n=t+":"+E(4)+"-"+E(4)+"-"+E(4)+"-"+E(4);return function(){return n+":"+ ++e}};function _(t){return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];"object"==typeof n&&null!==n&&_(n)})),Object.freeze(t)}!function(t){t.GETTER="GETTER",t.SETTER="SETTER",t.FUNCTION="FUNCTION"}(l||(l={})),function(t){t.REGISTER_MACRO="REGISTER_MACRO",t.REGISTER_ACTION="REGISTER_ACTION",t.LOCK="LOCK"}(d||(d={})),function(t){t.CREATE_SCOPE="CREATE_SCOPE",t.LOCK="LOCK"}(h||(h={}));var g=new Map,b={onCreateStore:function(){return null},onChangeStore:function(){return null},onCreateScope:function(){return null},onChangeScope:function(){return null},onAction:function(){return null},onActionError:function(){return null},onActionListenerError:function(){return null}},m="_reset",O="_restore",S=function(){function t(t,e){var n=this;this._context=null,this._contextEvent=null,this._isActionInProgress=!1,this._actions=new Map,this._listeners=new Map,this._listenerIdGenerator=y("ScopeListener");var r=e.name,o=e.initState,i=e.middleware,s=e.isImmutabilityEnabled,u=e.isSubscribedMacroAutoCreateEnabled,c=e.isFrozen;this.store=t,this.name=r,this.isImmutabilityEnabled=s,this.isSubscribedMacroAutoCreateEnabled=u,this._state=o,this._initState=o,this._middleware=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,u=i.length;s<u;s++,o++)r[o]=i[s];return r}(i).reverse(),this.registerAction("_reset",(function(){return n._initState})),this.registerAction("_restore",(function(t,e){return n._initState=e,e})),this._isFrozen=c}return Object.defineProperty(t.prototype,"isLocked",{get:function(){return this._isFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isActionDispatchAvailable",{get:function(){return!this._isActionInProgress},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportActions",{get:function(){return Array.from(this._actions.keys())},enumerable:!1,configurable:!0}),t.prototype.registerAction=function(t,e,n){var r=this;if(this._isFrozen)throw new Error("This scope is locked you can't add new action.");if(this._actions.has(t)||this.isSubscribedMacroAutoCreateEnabled&&t in this)throw new Error("Action name "+t+" is duplicate or reserved in scope "+this.name+".");this._actions.set(t,e);var o=function(e,o){var i=r.dispatch(t,e,o);return n?n(i,e):i};if(this.isSubscribedMacroAutoCreateEnabled){var i="on"+(t.charAt(0).toUpperCase()+t.slice(1));this.registerMacro(i,(function(e,n){return r.subscribe(n,[t])}))}return this[t]=o,b.onChangeScope(this,{type:d.REGISTER_ACTION,actionName:t}),o},t.prototype.registerMacro=function(t,e,n){var r=this;if(void 0===n&&(n=l.FUNCTION),!e)throw new Error("Macro cannot be null or undefined.");if(this._isFrozen)throw new Error("This scope is locked you can't add new macro.");if(t in this&&("function"==typeof r[t]||n===l.FUNCTION||n===l.GETTER&&Object.getOwnPropertyDescriptor(this,t).get||n===l.SETTER&&Object.getOwnPropertyDescriptor(this,t).set))throw new Error("Macro name "+t+" is reserved in scope "+this.name+".");var o=function(t){return e(r._state,t)};switch(n){case l.FUNCTION:this[t]=o;break;case l.GETTER:Object.defineProperty(this,t,{get:o,configurable:!0,enumerable:!0});break;case l.SETTER:Object.defineProperty(this,t,{set:o,configurable:!0,enumerable:!0})}b.onChangeScope(this,{type:d.REGISTER_MACRO,macroName:t,macroType:n})},t.prototype.dispatch=function(t,e,n){var r=this;void 0===n&&(n=!0);var o=this._actions.get(t);if(!o)throw new Error("This action not exists "+t);if(this._isActionInProgress)throw new Error("Now action dispatch not available. Other action spreads.");this.isImmutabilityEnabled&&e&&"object"==typeof e&&_(e),this._middleware.forEach((function(t){return o=t.appendActionMiddleware(o)}));var i=!this._isActionInProgress;i&&(this._isActionInProgress=!0);var s,u=i?this._state:this._context,c=function(n){return{reason:n,oldState:u,scopeName:r.name,actionName:t,props:e}},a=function(n){var o;return{props:e,oldState:u,newState:n,actionName:t,parentEvent:null!==(o=r._contextEvent)&&void 0!==o?o:null,scopeName:r.name,storeName:r.store.name,childrenEvents:[]}};try{return function(t){r.isImmutabilityEnabled&&t&&"object"==typeof e&&_(t),r._context=t,n&&(i?r._contextEvent=a(t):null==r||r._contextEvent.childrenEvents.push(a(t)));var o=function(t){b.onAction(t),r._listeners.forEach((function(e){try{null==e||e(t)}catch(t){b.onActionListenerError(c(t))}}))};return i&&(r._state=t,r._contextEvent&&(r._contextEvent.childrenEvents.forEach(o),o(r._contextEvent)),r._context=null,r._contextEvent=null,r._isActionInProgress=!1),t}(o(u,e))}catch(t){throw s=c(t),i&&b.onActionError(s),s}},t.prototype.subscribe=function(t,e){var n=this;void 0===e&&(e=[]),e.forEach((function(t){if(!n._actions.has(t))throw new Error("Action ("+t+") not present in scope.")}));var r=this._listenerIdGenerator();return this._listeners.set(r,0===e.length?t:function(n){-1!==e.findIndex((function(t){return t===n.actionName}))&&t(n)}),Object.assign((function(){return n.unsubscribe(r)}),{listenerId:r})},t.prototype.unsubscribe=function(t){return this._listeners.delete(t)},t.prototype.lock=function(){this._isFrozen=!0,b.onChangeScope(this,{type:d.LOCK})},t.prototype.reset=function(t){return this.dispatch("_reset",null,t)},t.prototype.restore=function(t,e){return this.dispatch("_restore",t,e)},t}(),T=function(){function t(t){this._scopes=new Map,this._statesToRestore=new Map,this._scopeNameGenerator=y("Scope"),this.name=t.name,this._isFrozen=t.isFrozen}return Object.defineProperty(t.prototype,"isLocked",{get:function(){return this._isFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){var t={};return this._scopes.forEach((function(e){t[e.name]=e.state})),t},enumerable:!1,configurable:!0}),t.prototype.createScope=function(t,e){if(void 0===t&&(t={}),this._isFrozen)throw new Error("This Store is locked you can't add new scope.");var n=t.name,r=void 0===n?this._scopeNameGenerator():n,o=t.initState,i=void 0===o?null:o,s=t.middleware,u=void 0===s?[]:s,c=t.isImmutabilityEnabled,a=void 0!==c&&c,f=t.isSubscribedMacroAutoCreateEnabled,l=void 0!==f&&f,d=t.isFrozen,p=void 0!==d&&d;if(this._scopes.has(r))throw new Error("Scope name must unique");var v=e&&this._statesToRestore.has(r),E=v?this._statesToRestore.get(r):i;v&&this._statesToRestore.delete(r);var y=new S(this,{name:r,initState:E,middleware:u,isImmutabilityEnabled:a,isSubscribedMacroAutoCreateEnabled:l,isFrozen:p});return this._scopes.set(r,y),u.forEach((function(t){return t.postSetup(y)})),b.onCreateScope(y),b.onChangeStore(this,{type:h.CREATE_SCOPE,scopeName:r}),y},t.prototype.getScope=function(t){return this._scopes.get(t)},t.prototype.hasScope=function(t){return this._scopes.has(t)},t.prototype.lock=function(){this._isFrozen=!0,this._scopes.forEach((function(t){return t.lock()})),b.onChangeStore(this,{type:h.LOCK})},t.prototype.reset=function(t){this._scopes.forEach((function(e){return e.reset(t)}))},t.prototype.restore=function(t,e){var n=this;Object.getOwnPropertyNames(t).forEach((function(r){var o=t[r];n.hasScope(r)?n.getScope(r).restore(o,e):n._statesToRestore.set(r,o)}))},t}();function R(t){return g.has(t)}function I(t){var e=t.name,n=t.isFrozen,r=void 0!==n&&n;if(R(e))throw new Error("Store name must unique");var o=new T({name:e,isFrozen:r});return g.set(e,o),b.onCreateStore(o),o}function w(t){return g.get(t)}function C(){var t={};return g.forEach((function(e){t[e.name]=e.state})),t}function A(t){Object.assign(b,t)}var L=function(){return(L=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},N=function(t,e){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},x=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(function(t,e){function n(){this.constructor=t}N(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.revertArray=function(t){return t.map(this.revert)}}(function(){function t(){}return t.prototype.convertArray=function(t){return t.map(this.convert)},t}()),function(t,e){void 0===t&&(t=16),void 0===e&&(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");for(var n="";n.length<t;)n+=e.charAt(Math.floor(Math.random()*e.length));return n}),P=function(t){var e=0,n=t+":"+x(4)+"-"+x(4)+"-"+x(4)+"-"+x(4);return function(){return n+":"+ ++e}},U=new Map,M=P("EventBus"),j=P("EventBusListener"),F={onCreate:function(){return null},onEvent:function(){return null},onEventListenerError:function(){return null}},k=function(){function t(t){this._events=[],this._queue=[],this._listeners=new Map;var e=t.name,n=t.isFrozen,r=t.isImmutabilityEnabled;this.name=e,this.isImmutabilityEnabled=r,this._isFrozen=n}return Object.defineProperty(t.prototype,"isLocked",{get:function(){return this._isFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportEvents",{get:function(){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,u=i.length;s<u;s++,o++)r[o]=i[s];return r}(this._events)},enumerable:!1,configurable:!0}),t.prototype.registerEvent=function(t){var e=this;if(this._isFrozen)throw new Error("This event bus is locked you can't add new event.");if(this.isEventPresent(t)||t in this)throw new Error("Event with name "+t+" is duplicate or reserved in event bus "+this.name+".");this._events.push(t);var n=function(){return t.charAt(0).toUpperCase()+t.slice(1)},r="on"+n(),o="publish"+n();this[r]=function(n){e.subscribe(n,[t])};var i=function(n){return e.publish(t,n)};return this[o]=i,i},t.prototype.publish=function(t,e){var n=this,r=function(){n.isImmutabilityEnabled&&e&&"object"==typeof e&&function t(e){return Object.getOwnPropertyNames(e).forEach((function(n){var r=e[n];"object"==typeof r&&null!==r&&t(r)})),Object.freeze(e)}(e);var r={eventBusName:n.name,eventName:t,data:e};F.onEvent(r),n._listeners.forEach((function(t){try{t&&t(r)}catch(t){F.onEventListenerError(L(L({},r),{reason:t}))}})),n._queue.shift(),n._queue.length>0&&(0,n._queue[0])()},o=0===this._queue.length;this._queue.push(r),o&&r()},t.prototype.subscribe=function(t,e){var n=this;void 0===e&&(e=[]),e.forEach((function(t){if(!n.isEventPresent(t))throw new Error("Event ("+t+") not present in scope.")}));var r=j();return this._listeners.set(r,0===e.length?t:function(n){-1!==e.findIndex((function(t){return t===n.eventName}))&&t(n)}),Object.assign((function(){return n.unsubscribe(r)}),{listenerId:r})},t.prototype.unsubscribe=function(t){return this._listeners.delete(t)},t.prototype.lock=function(){this._isFrozen=!0},t.prototype.isEventPresent=function(t){return-1!==this._events.findIndex((function(e){return e===t}))},t}();function B(t){return U.has(t)}function D(t){void 0===t&&(t={});var e=t.name,n=void 0===e?M():e,r=t.isFrozen,o=void 0!==r&&r,i=t.isImmutabilityEnabled,s=void 0!==i&&i;if(B(n))throw new Error("Event bus name must unique");var u=new k({name:n,isFrozen:o,isImmutabilityEnabled:s});return U.set(n,u),F.onCreate(u),u}function z(t){return U.get(t)}function V(t){Object.assign(F,t)}var G={STORE:"$store",EVENT_BUS:"$eventBus",MODULE_STORE:"$moduleStore",RESOURCE_STORE:"$resourceStore",INTERNATIONALIZATION_STORE:"$internationalizationStore",CONFIG_STORE:"$configStore",MODULE_SERVICE:"$moduleService",RESOURCE_SERVICE:"$resourceService",INTERNATIONALIZATION_SERVICE:"$internationalizationService",CONFIG_SERVICE:"$configService",JSX_SERVICE:"$jsxService",REPOSITORY_SERVICE:"$repositoryService"};function $(t,e){if(void 0===e&&(e=new p(t)),R(t))throw new Error("Ligui store exist with name "+t);if(B(t))throw new Error("Ligui event bus exist with name "+t);return Object.freeze({store:I({name:t}),eventBus:D({name:t}),bottle:e})}var q,Z=function(t,e){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},K=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}(function(t,e){function n(){this.constructor=t}Z(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.revertArray=function(t){return t.map(this.revert)}}(function(){function t(){}return t.prototype.convertArray=function(t){return t.map(this.convert)},t}()),function(t,e){void 0===t&&(t=16),void 0===e&&(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");for(var n="";n.length<t;)n+=e.charAt(Math.floor(Math.random()*e.length));return n}),J=function(t){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,u=i.length;s<u;s++,o++)r[o]=i[s];return r}(t)},X=function(t,e,n){void 0===n&&(n=function(t,e){return t===e});var r=t.findIndex((function(t,r,o){return n(t,e,r,o)}));-1!==r?t[r]=e:t.push(e)},Y=function(t,e){var n=t.findIndex(e);-1!==n&&t.splice(n,1)};!function(t){t.UpdateModules="UPDATE_MODULES"}(q||(q={}));var H,Q=function(t,e){var n=t.createScope({name:G.MODULE_STORE,initState:{modules:e.modules||[]},isSubscribedMacroAutoCreateEnabled:!0},!0);return n.setModules=n.registerAction(q.UpdateModules,(function(t,e){var n=J(t.modules);return e.forEach((function(t){return X(n,t,(function(e){return W(t.id,e.id)}))})),{modules:n}})),n.findModuleById=function(t){return n.state.modules.find((function(e){return W(e.id,t)}))},n.isModuleExist=function(t){return!!n.findModuleById(t)},n};function W(t,e){return t.key===e.key&&t.context===e.context}!function(t){t.UpdateResources="UPDATE_RESOURCES"}(H||(H={}));var tt=function(t,e){var n=t.createScope({name:G.RESOURCE_STORE,initState:{resources:e.resources||[]},isSubscribedMacroAutoCreateEnabled:!0},!0);return n.registerAction(H.UpdateResources,(function(t,e){var n=J(t.resources);return e.forEach((function(t){return X(n,t,(function(e){return et(t.id,e.id)}))})),{resources:n}})),n.findResourceById=function(t){return n.state.resources.find((function(e){return et(e.id,t)}))},n.isResourceExist=function(t){return!!n.findResourceById(t)},n};function et(t,e){return t.key===e.key&&t.context===e.context}var nt,rt=function(){return(rt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(t){t.ChangeLocale="CHANGE_LOCALE",t.UpdateTranslateUnits="UPDATE_TRANSLATE_UNITS"}(nt||(nt={}));var ot,it=function(t,e){var n=t.createScope({name:G.INTERNATIONALIZATION_STORE,initState:{currentLocale:e.currentLocale||null,defaultLocale:e.defaultLocale||null,locales:e.locales||[],translateUnits:e.translateUnits||[]},isSubscribedMacroAutoCreateEnabled:!0},!0);return n.setLocale=n.registerAction(nt.ChangeLocale,(function(t,e){if(!n.isLocaleExist(e))throw new Error("Locale not present in locales.");return rt(rt({},t),{currentLocale:e})})),n.setTranslateUnits=n.registerAction(nt.UpdateTranslateUnits,(function(t,e){var n=J(t.translateUnits);return e.forEach((function(t){return X(n,t,(function(e){return st(t.id,e.id)}))})),rt(rt({},t),{translateUnits:n})})),n.setTranslationForLocale=function(t,e,r){var o=Object.getOwnPropertyNames(e).map((function(n){return{id:{key:n,locale:t,context:r},data:e[n]}}));n.setTranslateUnits(o)},n.getCurrentLocale=function(){return n.state.currentLocale},n.getDefaultLocale=function(){return n.state.defaultLocale},n.getLocales=function(){return n.state.locales},n.findTranslateUnitById=function(t){return n.state.translateUnits.find((function(e){return st(e.id,t)}))},n.isLocaleExist=function(t){return!!n.state.locales.find((function(e){return e===t}))},n.isTranslateUnitExist=function(t){return!!n.findTranslateUnitById(t)},n};function st(t,e){return t.key===e.key&&t.locale===e.locale&&t.context===e.context}!function(t){t.UpdateConfigs="CONFIGS_UPDATE"}(ot||(ot={}));var ut=function(t,e){var n=t.createScope({name:G.CONFIG_STORE,initState:{configs:e.configs||[]},isSubscribedMacroAutoCreateEnabled:!0},!0);return n.setConfigs=n.registerAction(ot.UpdateConfigs,(function(t,e){var n=J(t.configs);return e.forEach((function(t){return X(n,t,(function(e){return ct(t.id,e.id)}))})),{configs:n}})),n.findConfigById=function(t){return n.state.configs.find((function(e){return ct(e.id,t)}))},n.isConfigExist=function(t){return!!n.findConfigById(t)},n};function ct(t,e){return t.key===e.key&&t.context===e.context}var at=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[];return t.filter((function(t){return!!t})).forEach((function(t){if("string"==typeof t)n.push(t);else{var e=t[0];t[1]&&n.push(e)}})),n.join(" ")},ft=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[];return t.filter((function(t){return!!t})).forEach((function(t){if(Array.isArray(t)){var e=t[0];t[1]&&n.push(e)}else n.push(t)})),n.reduce((function(t,e){return Object.assign(t,e)}))},lt=function(t,e){void 0===e&&(e=!0),t.preventDefault(),t.stopPropagation(),t.nativeEvent&&e&&(t.nativeEvent.preventDefault(),t.nativeEvent.stopPropagation())},dt=function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)},ht=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){t.filter((function(t){return!!t})).map((function(t){"function"==typeof t?t(e):t.current=e}))}},pt=function(){function t(){this._factories={},this.classes=at,this.styles=ft,this.eventTrap=lt,this.isModifiedEvent=dt,this.mergeRefs=ht}return t.prototype.hydrate=function(t,e){c(e,t)},t.prototype.hydrateComponent=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];c(this.node(e,n,r),t)},t.prototype.node=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t in this._factories?this._factories[t](n,r):e(t,n,r)},t.prototype.registerFactory=function(t,e){if(t in this._factories)throw new Error("Factory with same name is register.");this._factories[t]=e},t.prototype.render=function(t,e){a(e,t)},t.prototype.renderComponent=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];a(this.node(e,n,r),t)},t}(),vt=function(){function t(t,e){void 0===e&&(e=[]),this._store=t,this._resourceLoaders=e,this._resourcePromises=[]}return t.prototype.setResourceLoader=function(t){Y(this._resourcePromises,(function(e){return e.id.context===t.context})),X(this._resourceLoaders,t,(function(e){return e.context===t.context}))},t.prototype.getResourceLoader=function(t){return this._resourceLoaders.find((function(e){return e.context===t}))},t.prototype.loadResource=function(t){var e=this,n=this._resourcePromises,r=this._resourceLoaders,o=this._store;if(o.isResourceExist(t))return o.findResourceById(t);var i=n.find((function(e){return et(t,e.id)}));if(i)return i.promise;var s=r.find((function(e){return e.context===t.context}));if(!s)throw new Error("Resource loader for key "+JSON.stringify(t)+" not found");var u=s.loader(t.key),c=function(e){var n={id:t,data:e};return o.setResources([n]),n};if(u instanceof Promise){var a={id:t,promise:u.then(c)};return a.promise.then((function(){return Y(e._resourcePromises,(function(e){return et(e.id,t)}))})),n.push(a),a.promise}return c(u)},t}(),Et=function(){function t(t,e){void 0===e&&(e=[]),this._store=t,this._translateUnitLoaders=e,this._translateUnitPromises=[]}return t.prototype.setTranslateUnitLoader=function(t){Y(this._translateUnitPromises,(function(e){return e.id.context===t.context})),X(this._translateUnitLoaders,t,(function(e){return e.context===t.context}))},t.prototype.getTranslateUnitLoader=function(t){return this._translateUnitLoaders.find((function(e){return e.context===t}))},t.prototype.loadTranslateUnit=function(t){var e,n=this,r=this._translateUnitPromises,o=this._translateUnitLoaders,i=this._store;if(i.isTranslateUnitExist(t))return i.findTranslateUnitById(t);var s=r.find((function(e){return st(t,e.id)}));if(s)return s.promise;var u=o.find((function(e){return e.context===t.context}));if(!u)throw new Error("TranslateUnit loader for key "+JSON.stringify(t)+" not found");var c=null!==(e=u.loader(t.key,t.locale))&&void 0!==e?e:u.loader(t.key,i.getDefaultLocale()),a=function(e){var n={id:t,data:e};return i.setTranslateUnits([n]),n};if(c instanceof Promise){var f={id:t,promise:c.then(a)};return f.promise.then((function(){return Y(n._translateUnitPromises,(function(e){return st(e.id,t)}))})),r.push(f),f.promise}return a(c)},t.prototype.getTranslator=function(t,e){var n=this,r=function(o,i){var s,u={};if("string"==typeof i?u={defaultValue:i}:"object"==typeof i&&(u=i),"object"==typeof o)return o[r.locale]||u.defaultValue;if("string"!=typeof o)throw new Error("Invalid translator arg path format "+o);var c=(""+r.prefix+o).split(/[.\[\]]/).filter((function(t){return""!==t})),a=c[0],f=c.slice(1),l={key:a,context:t,locale:e||n._store.getCurrentLocale()},d={key:a,context:t,locale:n._store.getDefaultLocale()},h=null!==(s=n._store.findTranslateUnitById(l))&&void 0!==s?s:n._store.findTranslateUnitById(d);if(void 0===h)return u.defaultValue;for(var p=h.data,v=0;v<f.length&&p;v++)p=p[f[v]];return void 0===p?u.defaultValue:("string"!=typeof p||Object.keys(u).forEach((function(t){p=p.replace("${"+t,JSON.stringify(u[t]))})),p)};return r.locale=e||this._store.getCurrentLocale(),r.prefix="",r},t}(),yt=function(){function t(t,e){void 0===e&&(e=[]),this._store=t,this._configLoaders=e,this._configPromises=[]}return t.prototype.setConfigLoader=function(t){Y(this._configPromises,(function(e){return e.id.context===t.context})),X(this._configLoaders,t,(function(e){return e.context===t.context}))},t.prototype.getConfigLoader=function(t){return this._configLoaders.find((function(e){return e.context===t}))},t.prototype.loadConfig=function(t){var e=this,n=this._configPromises,r=this._configLoaders,o=this._store;if(o.isConfigExist(t))return o.findConfigById(t);var i=n.find((function(e){return ct(t,e.id)}));if(i)return i.promise;var s=r.find((function(e){return e.context===t.context}));if(!s)throw new Error("Config loader for key "+JSON.stringify(t)+" not found");var u=s.loader(t.key),c=function(e){var n={id:t,data:e};return o.setConfigs([n]),n};if(u instanceof Promise){var a={id:t,promise:u.then(c)};return a.promise.then((function(){return Y(e._configPromises,(function(e){return ct(e.id,t)}))})),n.push(a),a.promise}return c(u)},t}(),_t=function(){function t(t,e){void 0===e&&(e=[]),this._store=t,this._moduleLoaders=e,this._modulePromises=[]}return t.prototype.setModuleLoader=function(t){Y(this._modulePromises,(function(e){return e.id.context===t.context})),X(this._moduleLoaders,t,(function(e){return e.context===t.context}))},t.prototype.getModuleLoader=function(t){return this._moduleLoaders.find((function(e){return e.context===t}))},t.prototype.loadModule=function(t){var e=this,n=this._modulePromises,r=this._moduleLoaders,o=this._store;if(o.isModuleExist(t))return o.findModuleById(t);var i=n.find((function(e){return W(t,e.id)}));if(i)return i.promise;var s=r.find((function(e){return e.context===t.context}));if(!s)throw new Error("Module loader for key "+JSON.stringify(t)+" not found");var u=s.loader(t.key),c=function(e){var n={id:t,body:e};return o.setModules([n]),n};if(u instanceof Promise){var a={id:t,promise:u.then(c)};return a.promise.then((function(){return Y(e._modulePromises,(function(e){return W(e.id,t)}))})),n.push(a),a.promise}return c(u)},t}(),gt=function(){function t(){this._states=new Map,this._repositories=new Map}return t.prototype.get=function(t){return this._states.get(t)},t.prototype.set=function(t,e){this._states.set(t,e)},t.prototype.delete=function(t){this._states.delete(t)},t.prototype.collect=function(){var t={};return this._repositories.forEach((function(e,n){var r,o=null===(r=e.collect)||void 0===r?void 0:r.call(e);o&&(t[n]=o)})),t},t.prototype.reset=function(){this._repositories.forEach((function(t){var e;return null===(e=t.reset)||void 0===e?void 0:e.call(t)}))},t.prototype.restore=function(t){var e=this;Object.getOwnPropertyNames(t).forEach((function(n){var r,o,i=t[n];e._repositories.has(n)?null===(o=(r=e._repositories.get(n)).restore)||void 0===o||o.call(r,i):e._states.set(n,i)}))},t.prototype.registerRepository=function(t,e,n){var r;void 0===n&&(n={});var o=n.activeCollect,i=void 0===o||o,s=n.activeRestore,u=void 0===s||s,c=n.activeReset,a=void 0===c||c,f={};i&&(f.collect=function(){var t;return null===(t=e.collect)||void 0===t?void 0:t.call(e)}),u&&(f.restore=function(t){var n;return null===(n=e.restore)||void 0===n?void 0:n.call(e,t)}),a&&(f.reset=function(){var t;return null===(t=e.reset)||void 0===t?void 0:t.call(e)}),this._repositories.set(t,f),this._states.has(t)&&(null===(r=f.restore)||void 0===r||r.call(f,this._states.get(t)))},t}(),bt=function(t,e,o){var i=n(t),s=i[0],u=i[1];return r((function(){!s&&e&&Promise.resolve(e()).then((function(t){return u((function(){return t}))}))}),[]),r((function(){if(o){var e=o((function(){return u((function(){return t()}))}));if("function"==typeof e)return e}}),[]),s},mt=function(t){var e=0,n=t+":"+K(4)+"-"+K(4)+"-"+K(4)+"-"+K(4);return function(){return n+":"+ ++e}}("IdHook"),Ot=function(){return o((function(){return mt()}),[])},St=function(t){var e=n(t),r=e[0],o=e[1];return{set current(t){o((function(){return t}))},get current(){return r}}},Tt=function(t){return function(e,o,s,u){var c="string"==typeof e?t.getScope(e):e,a=null!=s?s:function(t){return t},f=i(null),l=n((function(){return a(c.state)})),d=l[0],h=l[1];return f.current=d,r((function(){return c.subscribe((function(t){var e=a(t.newState);u&&!u(f.current,e)||(f.current=e,h((function(){return e})))}),o)}),[]),d}},Rt=function(t){return function(e,n){void 0===e&&(e=null),r((function(){return t.subscribe(n,e)}),[])}},It=null;t&&(It=s(void 0));var wt=function(t){return function(e,o){var i=t[G.MODULE_STORE],s=t[G.MODULE_SERVICE],c={key:e,context:o||u(It)},a=n((function(){if(i.isModuleExist(c))return i.findModuleById(c).body;var t=s.loadModule(c);return t instanceof Promise?null:t.body})),f=a[0],l=a[1];return r((function(){f||Promise.resolve(s.loadModule(c)).then((function(t){return l((function(){return t.body}))}))}),[f]),f}},Ct=null;t&&(Ct=s(void 0));var At=function(t){return function(e,o){var i=t[G.RESOURCE_STORE],s=t[G.RESOURCE_SERVICE],c={key:e,context:o||u(Ct)},a=n((function(){if(i.isResourceExist(c))return i.findResourceById(c).data;var t=s.loadResource(c);return t instanceof Promise?null:t.data})),f=a[0],l=a[1];return r((function(){f||Promise.resolve(s.loadResource(c)).then((function(t){return l((function(){return t.data}))}))}),[f]),f}},Lt=function(t){return function(e){return o((function(){return t[e]}),[e])}},Nt=null;t&&(Nt=s(void 0));var xt=function(t){return function(){var e=t[G.INTERNATIONALIZATION_STORE],o=function(){return{setLocale:function(t){return e.setLocale(t)},currentLocale:e.getCurrentLocale(),defaultLocale:e.getDefaultLocale(),locales:e.getLocales()}},i=n(o),s=i[0],u=i[1];return r((function(){return e.subscribe((function(){u(o())}),[nt.ChangeLocale,m,O])}),[]),s}},Pt=function(t){return function(e,o){var i=t[G.INTERNATIONALIZATION_STORE],s=t[G.INTERNATIONALIZATION_SERVICE],c=o||u(Nt),a=function(){var t=s.getTranslator(c);return t.prefix=e+".",t},f=function(){return{key:e,context:c,locale:i.getCurrentLocale()}},l=function(){var t=f();return i.isTranslateUnitExist(t)?a():s.loadTranslateUnit(t)instanceof Promise?null:a()},d=n(l),h=d[0],p=d[1];return r((function(){return i.subscribe((function(t){if(t.actionName===nt.UpdateTranslateUnits){var e=f();if(!(t.props.findIndex((function(t){return st(t.id,e)}))>=0))return}var n=l();n&&p((function(){return n}))}),[nt.ChangeLocale,nt.UpdateTranslateUnits,m,O])}),[]),[h||function(t,e){return e},!!h]}},Ut=null;t&&(Ut=s(void 0));var Mt=function(t){return function(e,o){var i=t[G.CONFIG_STORE],s=t[G.CONFIG_SERVICE],c={key:e,context:o||u(Ut)},a=n((function(){if(i.isConfigExist(c))return i.findConfigById(c).data;var t=s.loadConfig(c);return t instanceof Promise?null:t.data})),f=a[0],l=a[1];return r((function(){f||Promise.resolve(s.loadConfig(c)).then((function(t){return l((function(){return t.data}))}))}),[f]),f}};function jt(t){if(global[t.name])throw new Error("Ligui instance present in global object with name: "+t.name);var e=$(t.name,t.bottle);e.bottle.constant(G.STORE,e.store),e.bottle.constant(G.EVENT_BUS,e.eventBus),e.bottle.factory(G.CONFIG_STORE,(function(){return ut(e.store,{configs:t.configs})})),e.bottle.factory(G.INTERNATIONALIZATION_STORE,(function(){return it(e.store,{locales:t.locales,currentLocale:t.currentLocale,defaultLocale:t.defaultLocale,translateUnits:t.translateUnits})})),e.bottle.factory(G.MODULE_STORE,(function(){return Q(e.store,{modules:t.modules})})),e.bottle.factory(G.RESOURCE_STORE,(function(){return tt(e.store,{resources:t.resources})})),e.bottle.factory(G.CONFIG_SERVICE,(function(e){return new yt(e[G.CONFIG_STORE],t.configLoaders)})),e.bottle.factory(G.INTERNATIONALIZATION_SERVICE,(function(e){return new Et(e[G.INTERNATIONALIZATION_STORE],t.internationalizationLoaders)})),e.bottle.factory(G.JSX_SERVICE,(function(){return new pt})),e.bottle.factory(G.MODULE_SERVICE,(function(e){return new _t(e[G.MODULE_STORE],t.moduleLoaders)})),e.bottle.factory(G.REPOSITORY_SERVICE,(function(){return new gt})),e.bottle.factory(G.RESOURCE_SERVICE,(function(e){return new vt(e[G.RESOURCE_STORE],t.resourceLoaders)}));var n={get jsx(){return e.bottle.container[G.JSX_SERVICE]},get resource(){return{store:e.bottle.container[G.RESOURCE_STORE],service:e.bottle.container[G.RESOURCE_SERVICE]}},get internationalization(){return{store:e.bottle.container[G.INTERNATIONALIZATION_STORE],service:e.bottle.container[G.INTERNATIONALIZATION_SERVICE]}},get config(){return{store:e.bottle.container[G.CONFIG_STORE],service:e.bottle.container[G.CONFIG_SERVICE]}},get module(){return{store:e.bottle.container[G.MODULE_STORE],service:e.bottle.container[G.MODULE_SERVICE]}},get repository(){return e.bottle.container[G.REPOSITORY_SERVICE]},get context(){return e},get store(){return e.store},get eventBus(){return e.eventBus},get bottle(){return e.bottle},get container(){return e.bottle.container},createStore:I,isStoreExist:R,getState:C,getStore:w,setStoreDevTool:A,createEventBus:D,isEventBusExist:B,getEventBus:z,setEventBusDevTool:V,useId:Ot,useRef:St,useData:bt,useState:Tt(e.store),useEvent:Rt(e.eventBus),useModule:wt(e.bottle.container),useResource:At(e.bottle.container),useI18n:xt(e.bottle.container),useTranslator:Pt(e.bottle.container),useConfig:Mt(e.bottle.container),useDependency:Lt(e.bottle.container)};return global[t.name]=n,n}export{Ut as ConfigKeyContext,yt as ConfigServiceImpl,ot as ConfigStoreActions,p as Container,Nt as InternationalizationKeyContext,Et as InternationalizationServiceImpl,nt as InternationalizationStoreActions,pt as JSXServiceImpl,G as LIGUI_TYPES,It as ModuleKeyContext,_t as ModuleServiceImpl,q as ModuleStoreActions,m as RESET_SCOPE_ACTION,O as RESTORE_SCOPE_ACTION,gt as RepositoryServiceImpl,Ct as ResourceKeyContext,vt as ResourceServiceImpl,H as ResourceStoreActions,d as ScopeChangeEventType,l as ScopeMacroType,h as StoreChangeEventType,at as classes,Mt as createConfigHook,ut as createConfigStore,$ as createContext,Lt as createDependencyHook,D as createEventBus,Rt as createEventHook,xt as createI18nHook,it as createInternationalizationStore,wt as createModuleHook,Q as createModuleStore,jt as createNewLiguiInstance,At as createResourceHook,tt as createResourceStore,Tt as createStateHook,I as createStore,Pt as createTranslatorHook,lt as eventTrap,z as getEventBus,C as getState,w as getStore,ct as isConfigsIdsEqual,B as isEventBusExist,dt as isModifiedEvent,W as isModulesIdsEqual,et as isResourcesIdsEqual,R as isStoreExist,st as isTranslateUnitsIdsEqual,ht as mergeRefs,V as setEventBusDevTool,A as setStoreDevTool,ft as styles,bt as useData,Ot as useId,St as useRef};
